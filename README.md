# Flux Messenger (æµåŠ¨ä¿¡ä½¿:æœåŠ¡å™¨åç«¯)

ä¸€ä¸ªåŸºäºC++å’ŒNode.jsçš„åˆ†å¸ƒå¼å®æ—¶èŠå¤©ç³»ç»Ÿï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€å¥½å‹ç®¡ç†å’Œå®æ—¶æ¶ˆæ¯ä¼ é€’ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæœåŠ¡ï¼š

### æœåŠ¡ç»„ä»¶

- **GateServer** - ç½‘å…³æœåŠ¡å™¨
  - å¤„ç†HTTPè¯·æ±‚
  - ç”¨æˆ·è®¤è¯å’Œæˆæƒ
  - è¯·æ±‚è·¯ç”±å’Œè´Ÿè½½å‡è¡¡

- **ChatServer/ChatServer2** - èŠå¤©æœåŠ¡å™¨é›†ç¾¤
  - å¤„ç†å®æ—¶æ¶ˆæ¯ä¼ é€’
  - WebSocketè¿æ¥ç®¡ç†
  - æ¶ˆæ¯è·¯ç”±å’Œåˆ†å‘
  - æ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œå®ç°é«˜å¯ç”¨

- **StatusServer** - çŠ¶æ€æœåŠ¡å™¨
  - ç”¨æˆ·åœ¨çº¿çŠ¶æ€ç®¡ç†
  - æœåŠ¡å™¨çŠ¶æ€ç›‘æ§
  - è´Ÿè½½å‡è¡¡æ”¯æŒ

- **VarifyServer** - éªŒè¯æœåŠ¡å™¨ (Node.js)
  - é‚®ç®±éªŒè¯ç å‘é€
  - ç”¨æˆ·æ³¨å†ŒéªŒè¯
  - é‚®ä»¶æœåŠ¡é›†æˆ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯ (C++)
- **æ¡†æ¶**: Boost.Asio (å¼‚æ­¥ç½‘ç»œç¼–ç¨‹)
- **é€šä¿¡**: gRPC (æœåŠ¡é—´é€šä¿¡)
- **æ•°æ®åº“**: MySQL (ç”¨æˆ·æ•°æ®å­˜å‚¨)
- **ç¼“å­˜**: Redis (ä¼šè¯ç®¡ç†ã€çŠ¶æ€ç¼“å­˜)
- **æ„å»º**: CMake + vcpkg
- **JSONå¤„ç†**: JsonCpp
- **ç½‘ç»œ**: Boost.Beast (HTTP/WebSocket)

### éªŒè¯æœåŠ¡ (Node.js)
- **è¿è¡Œæ—¶**: Node.js
- **é€šä¿¡**: @grpc/grpc-js
- **é‚®ä»¶**: Nodemailer
- **ç¼“å­˜**: ioredis
- **å·¥å…·**: UUIDç”Ÿæˆ

## ğŸ“‹ ä¸»è¦åŠŸèƒ½

### ç”¨æˆ·ç®¡ç†
- âœ… ç”¨æˆ·æ³¨å†Œï¼ˆé‚®ç®±éªŒè¯ï¼‰
- âœ… ç”¨æˆ·ç™»å½•/ç™»å‡º
- âœ… å¯†ç ä¿®æ”¹
- âœ… ç”¨æˆ·ä¿¡æ¯ç®¡ç†

### å¥½å‹ç³»ç»Ÿ
- âœ… å¥½å‹æœç´¢
- âœ… å¥½å‹æ·»åŠ ç”³è¯·
- âœ… å¥½å‹ç”³è¯·å®¡æ ¸
- âœ… å¥½å‹åˆ—è¡¨ç®¡ç†

### å®æ—¶é€šä¿¡
- âœ… å®æ—¶æ–‡æœ¬æ¶ˆæ¯
- âœ… æ¶ˆæ¯çŠ¶æ€é€šçŸ¥
- âœ… åœ¨çº¿çŠ¶æ€æ˜¾ç¤º
- âœ… å¿ƒè·³æ£€æµ‹
- âœ… ç¦»çº¿æ¶ˆæ¯é€šçŸ¥

### ç³»ç»Ÿç‰¹æ€§
- âœ… åˆ†å¸ƒå¼æ¶æ„
- âœ… è´Ÿè½½å‡è¡¡
- âœ… é«˜å¯ç”¨æ€§
- âœ… æ°´å¹³æ‰©å±•
- âœ… åˆ†å¸ƒå¼é”
- âœ… è¿æ¥æ± ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

#### C++ æœåŠ¡
- C++17 
- CMake 3.30.0
- vcpkg åŒ…ç®¡ç†å™¨
- MySQL 8.3.0
- Redis 3.0

#### Node.js æœåŠ¡
- Node.js 16.0
- npm

### å®‰è£…ä¾èµ–

#### 1. å®‰è£… vcpkg ä¾èµ–
```bash
# åœ¨æ¯ä¸ªC++æœåŠ¡ç›®å½•ä¸‹æ‰§è¡Œ
vcpkg install --x-manifest-root=.
```

#### 2. å®‰è£… Node.js ä¾èµ–
```bash
cd VarifyServer
npm install
```

### é…ç½®æ•°æ®åº“

#### MySQL é…ç½®
1. åˆ›å»ºæ•°æ®åº“å’Œè¡¨ç»“æ„
2. æ›´æ–°å„æœåŠ¡çš„ `config.ini` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯

#### Redis é…ç½®
1. å¯åŠ¨ Redis æœåŠ¡
2. æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„ Redis è¿æ¥ä¿¡æ¯

### ç¼–è¯‘å’Œè¿è¡Œ

#### 1. ç¼–è¯‘ C++ æœåŠ¡
```bash
# å¯¹æ¯ä¸ªC++æœåŠ¡æ‰§è¡Œ
mkdir build && cd build
cmake -DCMAKE_TOOLCHAIN_FILE=$VCPKG_HOME/scripts/buildsystems/vcpkg.cmake ../
make
```

#### 2. å¯åŠ¨æœåŠ¡

æŒ‰ä»¥ä¸‹é¡ºåºå¯åŠ¨æœåŠ¡ï¼š

```bash
# 1. å¯åŠ¨éªŒè¯æœåŠ¡
cd VarifyServer
npm start

# 2. å¯åŠ¨çŠ¶æ€æœåŠ¡
cd StatusServer/build
./StatusServer

# 3. å¯åŠ¨ç½‘å…³æœåŠ¡
cd GateServer/build
./GateServer

# 4. å¯åŠ¨èŠå¤©æœåŠ¡
cd ChatServer/build
./ChatServer

# 5. å¯åŠ¨èŠå¤©æœåŠ¡2ï¼ˆå¯é€‰ï¼Œç”¨äºé›†ç¾¤ï¼‰
cd ChatServer2/build
./ChatServer
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ChatServer/
â”œâ”€â”€ ChatServer/          # èŠå¤©æœåŠ¡å™¨1
â”‚   â”œâ”€â”€ include/         # å¤´æ–‡ä»¶ä»¥åŠé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ src/            # æºä»£ç 
â”‚   â”œâ”€â”€ CmakeLists.txt  # CMakeé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ vcpkg.json      # ä¾èµ–é…ç½®
â”œâ”€â”€ ChatServer2/         # èŠå¤©æœåŠ¡å™¨2ï¼ˆé›†ç¾¤ï¼‰
â”œâ”€â”€ GateServer/          # ç½‘å…³æœåŠ¡å™¨
â”œâ”€â”€ StatusServer/        # çŠ¶æ€æœåŠ¡å™¨
â”œâ”€â”€ VarifyServer/        # éªŒè¯æœåŠ¡å™¨ï¼ˆNode.jsï¼‰
â”‚   â”œâ”€â”€ server.js       # ä¸»æœåŠ¡æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json    # Node.jsä¾èµ–
â”‚   â””â”€â”€ config.js       # é…ç½®æ–‡ä»¶
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç«¯å£é…ç½®
- GateServer: HTTPæœåŠ¡ç«¯å£
- ChatServer: WebSocketç«¯å£ + gRPCç«¯å£
- ChatServer2: ä¸åŒç«¯å£é…ç½®ï¼ˆé›†ç¾¤éƒ¨ç½²ï¼‰
- StatusServer: gRPCç«¯å£
- VarifyServer: gRPCç«¯å£

### æ•°æ®åº“é…ç½®
æ¯ä¸ªæœåŠ¡çš„ `config.ini` æ–‡ä»¶åŒ…å«ï¼š
- MySQLè¿æ¥ä¿¡æ¯
- Redisè¿æ¥ä¿¡æ¯
- æœåŠ¡ç«¯å£é…ç½®
- é›†ç¾¤èŠ‚ç‚¹é…ç½®

## ğŸ”„ æ¶ˆæ¯æµç¨‹

1. **ç”¨æˆ·æ³¨å†Œ**: å®¢æˆ·ç«¯ â†’ GateServer â†’ VarifyServer â†’ é‚®ç®±éªŒè¯
2. **ç”¨æˆ·ç™»å½•**: å®¢æˆ·ç«¯ â†’ GateServer â†’ ChatServer â†’ çŠ¶æ€æ›´æ–°
3. **å‘é€æ¶ˆæ¯**: å®¢æˆ·ç«¯ â†’ ChatServer â†’ ç›®æ ‡ChatServer â†’ æ¥æ”¶æ–¹å®¢æˆ·ç«¯
4. **çŠ¶æ€åŒæ­¥**: ChatServer â†” StatusServer â†” Redis

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- JWT Tokenè®¤è¯
- å¯†ç åŠ å¯†å­˜å‚¨
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- SQLæ³¨å…¥é˜²æŠ¤
- XSSæ”»å‡»é˜²æŠ¤

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

- å¼‚æ­¥I/Oå¤„ç†
- è¿æ¥æ± ç®¡ç†
- Redisç¼“å­˜ä¼˜åŒ–
- è´Ÿè½½å‡è¡¡
- æ°´å¹³æ‰©å±•æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request


