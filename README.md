# Flux Messenger (æµåŠ¨ä¿¡ä½¿)

Flux Messenger æ˜¯ä¸€ä¸ªåŸºäºC++å’Œå¾®æœåŠ¡æ¶æ„çš„åˆ†å¸ƒå¼å®æ—¶èŠå¤©åº”ç”¨ã€‚é¡¹ç›®æ—¨åœ¨å®è·µé«˜å¹¶å‘åç«¯æŠ€æœ¯ï¼Œå®ç°äº†ä¸€ä¸ªåŒ…å«ç”¨æˆ·æœåŠ¡ã€å¥½å‹å…³ç³»ã€å®æ—¶é€šä¿¡å’Œç¦»çº¿æ¶ˆæ¯ç­‰åŠŸèƒ½çš„æ ¸å¿ƒèŠå¤©ç³»ç»Ÿã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **ç”¨æˆ·æœåŠ¡:** æ”¯æŒæ³¨å†Œï¼ˆé‚®ä»¶éªŒè¯ï¼‰ã€ç™»å½•åŠèµ„æ–™ç®¡ç†ã€‚
*   **å¥½å‹ç³»ç»Ÿ:** æ”¯æŒç”¨æˆ·æœç´¢ã€å¥½å‹è¯·æ±‚åŠåˆ—è¡¨ç®¡ç†ã€‚
*   **å®æ—¶é€šä¿¡:** åŸºäºWebSocketçš„å³æ—¶æ¶ˆæ¯åŠåœ¨çº¿çŠ¶æ€åŒæ­¥ã€‚
*   **ç¦»çº¿æ¶ˆæ¯:** ä¿è¯ç”¨æˆ·ç¦»çº¿æœŸé—´çš„æ¶ˆæ¯å¯è¾¾æ€§ã€‚
*   **æ°´å¹³æ‰©å±•:** å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå„æœåŠ¡ç‹¬ç«‹éƒ¨ç½²ä¸æ‰©å±•ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

ç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå°†ä¸åŒä¸šåŠ¡é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼ŒæœåŠ¡é—´é€šè¿‡gRPCè¿›è¡Œé«˜æ•ˆé€šä¿¡ã€‚

### æ ¸å¿ƒæœåŠ¡

*   **`GateServer` (C++)**: APIç½‘å…³ï¼Œè´Ÿè´£å®¢æˆ·ç«¯HTTPè¯·æ±‚çš„æ¥å…¥ã€ç”¨æˆ·è®¤è¯åŠæµé‡è·¯ç”±ã€‚
*   **`ChatServer` (C++)**: èŠå¤©æ ¸å¿ƒæœåŠ¡ï¼Œç®¡ç†WebSocketé•¿è¿æ¥ï¼Œå¤„ç†å®æ—¶æ¶ˆæ¯è·¯ç”±ã€‚æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²ä»¥åˆ†æ‹…è´Ÿè½½ã€‚
*   **`StatusServer` (C++)**: çŠ¶æ€ç®¡ç†æœåŠ¡ï¼Œé€šè¿‡Redisç»´æŠ¤ç”¨æˆ·çš„åœ¨çº¿çŠ¶æ€åŠæ‰€åœ¨`ChatServer`çš„æ˜ å°„å…³ç³»ï¼Œå®ç°è·¨æœåŠ¡çš„æ¶ˆæ¯æŠ•é€’ã€‚
*   **`VarifyServer` (Node.js)**: ç‹¬ç«‹çš„éªŒè¯æœåŠ¡ï¼Œè´Ÿè´£å¤„ç†æ³¨å†Œé‚®ä»¶çš„å‘é€ã€‚

### æŠ€æœ¯æ ˆ

*   **åç«¯:** C++17, Boost.Asio (å¼‚æ­¥ç½‘ç»œ)
*   **æœåŠ¡é—´é€šä¿¡:** gRPC, Protocol Buffers
*   **æ•°æ®å­˜å‚¨:** MySQL (æŒä¹…åŒ–), Redis (çŠ¶æ€ç¼“å­˜ä¸åˆ†å¸ƒå¼é”)
*   **æ„å»ºä¸ä¾èµ–:** CMake, vcpkg
*   **éƒ¨ç½²:** Docker

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒä¾èµ–

*   C++17 ç¼–è¯‘å™¨, CMake (>= 3.30), vcpkg
*   Docker, Docker Compose
*   Node.js (>= 16.0), npm

### 1. å¯åŠ¨åŸºç¡€æœåŠ¡

é¡¹ç›®ä½¿ç”¨Docker Composeæ¥ç®¡ç†MySQLå’ŒRedisï¼Œç®€åŒ–äº†ç¯å¢ƒæ­å»ºã€‚

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ todo:è¿˜æœªå®ç°dockerfile
docker-compose up -d
```

### 2. å®‰è£…ä¸é…ç½®

```bash
# å®‰è£…C++æœåŠ¡ä¾èµ–
# (åœ¨GateServer, ChatServer, StatusServerç›®å½•ä¸‹åˆ†åˆ«æ‰§è¡Œ)
vcpkg install --x-manifest-root=.

# å®‰è£…Node.jsæœåŠ¡ä¾èµ–
cd VarifyServer && npm install
```

æ¥ä¸‹æ¥ï¼Œè¯·æ ¹æ® `config.ini.example` å’Œ `config.js.example` åˆ›å»ºå¹¶ä¿®æ”¹æ¯ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥æ­£ç¡®çš„æ•°æ®åº“å’ŒRedisè¿æ¥ä¿¡æ¯ã€‚

### 3. æ„å»ºä¸è¿è¡Œ

è¯·æŒ‰ç…§ä»¥ä¸‹é¡ºåºç¼–è¯‘å¹¶å¯åŠ¨æœåŠ¡ï¼š

```bash
# 1. ç¼–è¯‘æ‰€æœ‰C++æœåŠ¡
# (åœ¨GateServer, ChatServer, StatusServerç›®å½•ä¸‹åˆ†åˆ«æ‰§è¡Œ)
mkdir build && cd build
cmake -DCMAKE_TOOLCHAIN_FILE=$VCPKG_HOME/scripts/buildsystems/vcpkg.cmake ..
make -j$(nproc)

# 2. ä¾æ¬¡å¯åŠ¨æ‰€æœ‰æœåŠ¡ (è¯·åœ¨å„è‡ªçš„ç›®å½•ä¸‹æ‰§è¡Œ)
./VarifyServer/server.js
./StatusServer/build/main.out
./GateServer/build/main.out
./ChatServer/build/main.out
# ./ChatServer2/build/main.out # (å¯é€‰)
```

æœåŠ¡å¯åŠ¨åï¼Œç³»ç»Ÿå³å¯æ­£å¸¸è¿è¡Œã€‚


